[#search-api]
= Search operator API


[[_rhacm-docs_apis_searchoperator_jsonoverview]]
== Overview
This documentation is for the searchCustomization resource for {product-title}. The SearchCustomization resource has four possible requests: create, query, delete and update. 


=== Version information
[%hardbreaks]
_Version_ : 2.9.0


=== URI scheme
[%hardbreaks]
_BasePath_ : /kubernetes/apis
_Schemes_ : HTTPS


=== Tags

* searches.open-cluster-management.io/v1 : Create and manage the search operator


[[_rhacm-docs_apis_searchoperator_jsonpaths]]
== Paths

[[_rhacm-docs_apis_searchoperator_jsoncreate]]
=== Create a search list
....
POST /searches.open-cluster-management.io/v1/v1alpha1/namespaces/{namespace}/policies/{policy_name}
....


==== Description
Create a searchList.


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|*Header*|*COOKIE* +
_required_|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|*Path*|*namespace* +
_required_|Namespace that you want to use, for example, default.|string
|*Body*|*body* +
_required_|Parameters describing the policy to be created.|
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|*200*|Success|No Content
|*403*|Access forbidden|No Content
|*404*|Resource not found|No Content
|*500*|Internal service error|No Content
|*503*|Service unavailable|No Content
|===


==== Consumes

* `searchCustomization/json`


==== Tags

* searches.open-cluster-management.io


==== Example HTTP request

===== Request body
[source,json]
----
{
  "apiVersion": "search.open-cluster-management.io/v1",
  "kind": "SearchCustomization",
  "metadata": {
    "name": "test-search-swagger",
    "description": "Example body for SearchCustomization API Swagger docs"
  },
  "spec": {
    "remediationAction": "enforce",
    "namespaces": {
      "include": [
        "default"
      ],
      "exclude": [
        "kube*"
      ]
    },
    "policy-templates": {
    "kind": "ConfigurationPolicy",
    "apiVersion": "search.open-cluster-management.io/v1alpha1",
    "complianceType": "musthave",
    "metadata": {
      "namespace": null,
      "name": "test-role"
    },
    "selector": {
      "matchLabels": {
        "cloud": "IBM"
      }
    },
    "spec" : {
      "object-templates": {
        "complianceType": "mustHave",
        "objectDefinition": {
          "apiVersion": "rbac.authorization.k8s.io/v1",
          "kind": "Role",
          "metadata": {
            "name": "role-policy",
          },
          "rules": [
            {
              "apiGroups": [
                "extensions",
                "apps"
              ],
              "resources": [
                "deployments"
              ],
              "verbs": [
                "get",
                "list",
                "watch",
                "delete"
              ]
            },
            {
              "apiGroups": [
                "core"
              ],
              "resources": [
                "pods"
              ],
              "verbs": [
                "create",
                "update",
                "patch"
              ]
            },
            {
              "apiGroups": [
                "core"
              ],
              "resources": [
                "secrets"
              ],
              "verbs": [
                "get",
                "watch",
                "list",
                "create",
                "delete",
                "update",
                "patch"
              ],
            },
          ],
        },
      },
    },
  },
----


[[_rhacm-docs_apis_searchoperator_jsonquerypolicies]]
=== Query searchCustomization
....
GET /search.open-cluster-management.io/v1/v1alpha1/namespaces/{namespace}/policies/{policy_name}
....


==== Description
Query your searchCustomization for more details.


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|*Header*|*COOKIE* +
_required_|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|*Path*|*namespace* +
_required_|Namespace that you want to apply the policy to, for example, default.|string
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|*200*|Success|No Content
|*403*|Access forbidden|No Content
|*404*|Resource not found|No Content
|*500*|Internal service error|No Content
|*503*|Service unavailable|No Content
|===


==== Consumes

* `searchOperator/json`


==== Tags

* search.open-cluster-management.io


[[_rhacm-docs_apis_searchoperator_jsonquerypolicy]]
=== Query a single policy
....
GET /search.open-cluster-management.io/v1/v1alpha1/namespaces/{namespace}/policies/{policy_name}
....


==== Description
Query a single searchCustomization for more details.


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|*Header*|*COOKIE* +
_required_|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|*Path*|*policy_name* +
_required_|Name of the policy that you want to query.|string
|*Path*|*namespace* +
_required_|Namespace that you want to use, for example, default.|string
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|*200*|Success|No Content
|*403*|Access forbidden|No Content
|*404*|Resource not found|No Content
|*500*|Internal service error|No Content
|*503*|Service unavailable|No Content
|===


==== Tags

* search.open-cluster-management.io


[[_rhacm-docs_apis_searchoperator_jsondeletsearchoperator]]
=== Delete a searchCustomization
....
DELETE /search.open-cluster-management.io/v1/v1alpha1/namespaces/{namespace}/policies/{policy_name}
....


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|*Header*|*COOKIE* +
_required_|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|*Path*|*policy_name* +
_required_|Name of the policy that you want to delete.|string
|*Path*|*namespace* +
_required_|Namespace that you want to use, for example, default.|string
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|*200*|Success|No Content
|*403*|Access forbidden|No Content
|*404*|Resource not found|No Content
|*500*|Internal service error|No Content
|*503*|Service unavailable|No Content
|===


==== Tags

* searches.open-cluster-management.io




[[_rhacm-docs_apis_searchoperator_jsondefinitions]]
== Definitions

[[_rhacm-docs_apis_seachcustomization_jsonpolicy]]
=== SearchList

[options="header", cols=".^2a,.^3a,.^4a"]
|===
|Name|Description|Schema
|*apiVersion* +
_required_|The versioned schema of SearchList. |string
|*kind* +
_required_|String value that represents the REST resource. |string
|*metadata* +
_required_|Describes rules that define the policy.| object
|*spec* +
_required_|<<_rhacm-docs_apis_searchoperator_jsonpolicy_spec,spec>>
|===

[[_rhacm-docs_apis_searchoperator_jsonpolicy_spec]]
*spec*

[options="header", cols=".^2a,.^3a,.^4a"]
|===
|Name|Description|Schema
|*group* +
_required_|Value that represents the API group for the list. | string
|*names* +
_required_|Value that represents ..... |string
|<<_rhacm-docs_apis_searchoperator_jsonpolicy_policytemplates, *policy-templates*>> +
_optional_|array
|===

[[_rhacm-docs_apis_searchoperator_json_names]]
*names*

[options="header", cols=".^2a,.^3a,.^4a"]
|===
|Name|Description|Schema
|*listKind* +
_required_|The versioned schema of SearchCustomization.| string
|*plural* +
_required_|The versioned schema of SearchCustomization.| string
|*singular* +
_optional_|String value that represents the REST resource.|string
|===

[[_rhacm-docs_apis_searchoperator_json_scope]]
*scope*

[options="header", cols=".^2a,.^3a,.^4a"]
|===
|Name|Description|Schema
|*matchLabels* +
_optional_| The label that is required for the policy to be applied to a namespace.|object
|*cloud* +
_optional_|The label that is required for the policy to be applied to a cloud provider. |string
|===

[[_rhacm-docs_apis_searchoperator_jsonpolicy_rules]]
*rules*

[options="header", cols=".^2a,.^3a,.^4a"]
|===
|Name|Description|Schema
|*apiGroups* +
_required_| List of APIs that the rule applies to. |string
| *resources* +
_required_| A list of resource types.|object
|*verbs* +
_required_| A list of verbs. |string
|===